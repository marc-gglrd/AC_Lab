function [agt,i,d,D]=cd_update_idd(agt,lab)

%update_idd function for class CHILD
%agt: child object
%updates indifference and lab distance in agt child
% ----------------------------------
%Project: AC-Lab by M.G. [created Feb 2020]
%Main Function: aclab_go
% ----------------------------------

global N_IT IT_STATS PRMS_ACLAB

i = agt.cf2_i;
d = agt.cf3_d;
D = agt.cf4_d;

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
if PRMS_ACLAB.cf2_on
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    
%%% -----------------------------------------------------------------
%%% --- UPDATE INDIFFERENCE -----------------------------------------
%%% -----------------------------------------------------------------
% --- child indifference: 100 * cd-explorations / (N_IT)
cr_explore_cntr  = IT_STATS.cr_explore_cntr (N_IT);
 
i = 100 * (cr_explore_cntr) / (N_IT);%child indifference
%i = 100 * (cd_explore_cntr) / (cd_explore_cntr + cd_approach_cntr); %child indifference 

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
end
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
if PRMS_ACLAB.cf3_on
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%%% -----------------------------------------------------------------
%%% --- UPDATE DISTANCING -------------------------------------------
%%% -----------------------------------------------------------------

d = calculate_cd_cr_d(lab); %lab distance

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
end
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
if PRMS_ACLAB.cf4_on
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%%% -----------------------------------------------------------------
%%% --- UPDATE DISTANCING -------------------------------------------
%%% -----------------------------------------------------------------

D = calculate_cd_cr_d(lab); %lab distance

%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
end
%%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

agt.cf2_i = i;
agt.cf3_d = d;
agt.cf4_d = D;
